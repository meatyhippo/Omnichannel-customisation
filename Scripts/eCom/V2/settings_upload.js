(()=>{
	let settings = [
			//enter json of /admin/theme/manage/settings.json here
		],
//get auth token
	token = document.head.querySelectorAll('meta[name="csrf-token"]')[0].getAttribute('content');
//per setting in body, POST setting
	settings.forEach((setting,i) => {
		//post setting with simple body. will return a settin id in order to update
		let settingbody = {
			"theme_setting":{
				"title": setting.title,
				"type": setting.type
			}
		};
		$.ajax({
			type: "POST",
			url: location.origin + location.pathname + ".json",
			"headers": {
				"accept": "application/json, text/plain, */*",
				"content-type": "application/json",
				"x-csrf-token": token
			},
			data: JSON.stringify(settingbody),
			dataType: "json",
			async: false,
			success: function (res) {
				/**/console.log('setting used:', setting, res.theme_setting.id);
				update_setting(setting, res.theme_setting);  //get id from json and put into patch function
			},
			error: function (err, textStatus, jqXHR) {
				/**/console.log("error", err, textStatus, jqXHR);
			}
			
		});
	})
	function update_setting(setting, theme_setting) {
		function options(options){
			let str = ``;
			for (const key in options) {
				if (Object.hasOwnProperty.call(options, key)) {
					const element = options[key];
					str += key + ':' + element + '\\n';
				}
			}
			/**/console.log(str);
			return str
		}
		$.ajax({
			type: "PATCH",
			url: location.origin + location.pathname + '/' + theme_setting.id + ".json",
			"headers": {
				"accept": "application/json, text/plain, */*",
				"content-type": "application/json",
				"x-csrf-token": token
			},
			dataType: "json",
			async: false,
			data: "{\"theme_setting\":{\"category\":\""+
			setting.category+"\",\"default_value\":\""+
			setting.default_value+"\",\"description\":\""+
			setting.description+"\",\"key\":\""+
			setting.key+"\",\"options\":\""+
			options(setting.options)+"\",\"position\":"+
			setting.position+",\"title\":\""+
			setting.title+"\",\"type\":\""+
			setting.type+"\",\"theme_setting_mapping\":{\"section\":\""+
			setting.theme_setting_mapping.section+"\",\"apply_to\":[\""+
			setting.theme_setting_mapping.apply_to[0]+"\"]}}}",
			success: function (result) {
				/**/console.log(result);
			},
			error: function (err) {
				/**/console.log("error:", err, err.responseJSON);
				/**/console.log('data:', data);
			}
			
		});
	}
})();

// TODO #16 implement setting order from /admin/theme/manage/settings/bulk.json

/*
fetch("https://theme-denver.webshopapp.com/admin/theme/manage/settings/bulk.json", {
  "headers": {
    "content-type": "application/json;charset=UTF-8",
    "x-csrf-token": "e31629da50969e07f46aeb0cb66c3fc654dbb500"
  },
  "referrer": "https://theme-denver.webshopapp.com/admin/theme/manage/settings",
  "referrerPolicy": "strict-origin-when-cross-origin",
  "body": "{\"ids\":[17141275,17141276,17141277,17141278,17141279,17141280,17141281,17141282,17141283,17141284,17141285,17141286,17141287,17141288,17141289,17141290,17141291,17141292,17141293,17141294,17141295,17141296,17141297,17141298,17141299,17141300,17141301,17141302,17141303,17141304,17141305,17141306,17141307,17141308,17141309,17141310,17141311,17141312,17141313,17141314,17141315,17141316,17141317,17141318,17141319,17141320,17141321,17141322,17141323,17141324,17141325,17141326,17141327,17141328,17141329,17141330,17141331,17141332,17141333,17141334,17141335,17141336,17141337,17141338,17141339,17141340,17141341,17141342,17141343,17141344,17141345,17141346,17141347,17141348,17141349,17141350,17141351,17141352,17141353,17141354,17141355,17141356,17141357,17141358,17141359,17141360,17141361,17141362,17141363,17141364,17141365,17141366,17141367,17141368,17141369,17141370,17141371,17141372,17141373,17141374,17141375,17141376,17141377,17141378,17141379,17141380,17141381,17141382,17141383,17141384,17141385,17141386,17141387,17141388,17141389,17141390,17141391,17141392,17141393,17141394,17141395,17141396,17141397,17141398,17141399,17141400,17141401,17141402,17141403,17141404,17141405,17141406,17141407,17141408,17141409,17141410,17141411,17141412,17141413,17141414,17141415,17141416,17141417,17141418,17141419,17141420,17141421,17141422,17141423,17141424,17141425,17141426,17141427,17141428,17141429,17141430,17141431,17141432,17141433,17141434,17141435,17141436,17141437,17141438,17141439,17141440,17141441,17141442,17141443,17141445,17141446,17141447,17141448,17141449,17141450,17141451,17141452,17141453,17141454,17141455,17141456,17141457,17141458,17141459,17141460,17141461,17141462,17141463,17141464,17141465,17141466,17141467,17141468,17141469,17141470,17141471,17141472,17141473,17141474,17141475,17141476,17141477,17141478,17141479,17141480,17141481,17141482,17141483,17141484,17141485,17141486,17141487,17141488,17141489,17141490,17141491,17141492,17141493,17141494,17141495,17141496,17141497,17141498,17141499,17141500,17141501,17141502,17141503,17141504,17141505,17141506,17141507,17141508,17141509,17141510,17141511,17141512,17141513,17141514,17141515,17141516,17141517,17141518,17141519,17141520,17141521,17141522,17141523,17141524,17141525,17141526,17141527,17141528,17141529,17141530,17141531,17141532,17141533,17141534,17141535,17141537,17141538,17141539,17141540,17141541,17141542,17141543,17141544,17141545,17141546,17141547,17141548,17141549,17141550,17141551,17141552,17141553,17141554,17141555,17141556,17141557,17141558,17141559,17141560,17141561,17141562,17141563,17141564,17141565,17141566,17141567,17141568,17141569,17141570,17141571,17141572,17141573,17141574,17141575,17141576,17141577,17141578,17141579,17141580,17141581,17141582,17141583,17141584,17141585,17141586,17141587,17141588,17141589,17141590,17141591,17141592,17141593,17141594,17141595,17141596,17141597,17141598,17141599,17141600,17141601,17141602,17141603,17141604,17141605,17141606,17141607,17141608,17141609,17141610,17141611,17141612,17141613,17141614,17141615,17141616,17141617,17141618,17141619,17141620,17141621,17141622,17141623,17141624,17141625,17141626,17141627,17141628,17141629,17141630,17141631,17141632,17141633,17141634,17141635,17141636,17141637,17141638,17141639,17141640,17141641,17141642,17141643,17141644,17141645,17141646,17141647,17141648,17141649,17141650,17141651,17141652,17141653,17141654,17141655,17141656,17141657,17141658,17141659,17141660,17141661,17141528,17141663,17141664,17141665,17141666,17141667,17141668,17141669,17141670,17141671,17141672,17141673,17141674,17141675,17141676,17141677,17141678,17141679,17141680,17141681,17141682,17141683,17141684,17141685,17141686,17141687,17141688,17141689,17141690],\"operation\":\"reorder\"}",
  "method": "PATCH",
  "mode": "cors",
  "credentials": "include"
});
*/

// TODO #17 implement uploading theme code (/files, but dragging files is fine)

// TODO #18 copy full personal theme settings

// TODO #19 test multiple apply to pages