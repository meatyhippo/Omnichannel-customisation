$(document).ready(function () {
	let products = [
		{
		  "itemID": "1",
		  "systemSku": "210000000001",
		  "defaultCost": "0",
		  "avgCost": "0",
		  "discountable": "true",
		  "tax": "true",
		  "archived": "false",
		  "itemType": "non_inventory",
		  "serialized": "false",
		  "description": "Shipping",
		  "modelYear": "0",
		  "upc": "",
		  "ean": "",
		  "customSku": "",
		  "manufacturerSku": "",
		  "createTime": "2018-07-18T12:44:19+00:00",
		  "timeStamp": "2021-06-25T07:28:12+00:00",
		  "publishToEcom": "true",
		  "categoryID": "0",
		  "taxClassID": "0",
		  "departmentID": "0",
		  "itemMatrixID": "0",
		  "manufacturerID": "0",
		  "seasonID": "0",
		  "defaultVendorID": "0",
		  "Prices": {
			"ItemPrice": [
			  {
				"amount": "0",
				"useTypeID": "1",
				"useType": "Default"
			  },
			  {
				"amount": "0",
				"useTypeID": "2",
				"useType": "MSRP"
			  },
			  {
				"amount": "0",
				"useTypeID": "3",
				"useType": "Online"
			  },
			  {
				"amount": "0",
				"useTypeID": "5",
				"useType": "UK"
			  }
			]
		  }
		},
		{
		  "itemID": "5",
		  "systemSku": "210000000005",
		  "defaultCost": "12.99",
		  "avgCost": "12.99",
		  "discountable": "true",
		  "tax": "true",
		  "archived": "false",
		  "itemType": "serialized",
		  "serialized": "true",
		  "description": "GG-WI-US SCOTT SPLIT SIX pink amplifier",
		  "modelYear": "0",
		  "upc": "715701877195",
		  "ean": "7613152709504",
		  "customSku": "CSKU0001",
		  "manufacturerSku": "MSKU0001",
		  "createTime": "2019-03-26T05:57:37+00:00",
		  "timeStamp": "2021-08-17T14:32:39+00:00",
		  "publishToEcom": "true",
		  "categoryID": "27",
		  "taxClassID": "1",
		  "departmentID": "0",
		  "itemMatrixID": "0",
		  "manufacturerID": "2",
		  "seasonID": "0",
		  "defaultVendorID": "395",
		  "Prices": {
			"ItemPrice": [
			  {
				"amount": "15",
				"useTypeID": "1",
				"useType": "Default"
			  },
			  {
				"amount": "16.5",
				"useTypeID": "2",
				"useType": "MSRP"
			  },
			  {
				"amount": "0",
				"useTypeID": "3",
				"useType": "Online"
			  },
			  {
				"amount": "0",
				"useTypeID": "5",
				"useType": "UK"
			  }
			]
		  }
		},
		{
		  "itemID": "1087",
		  "systemSku": "210000001111",
		  "defaultCost": "18",
		  "avgCost": "18",
		  "discountable": "true",
		  "tax": "true",
		  "archived": "false",
		  "itemType": "default",
		  "serialized": "false",
		  "description": "Adelio 3mm deluxe bootss 10",
		  "modelYear": "0",
		  "upc": "",
		  "ean": "",
		  "customSku": "CSKU0002",
		  "manufacturerSku": "MSKU0004",
		  "createTime": "2019-05-08T04:41:40+00:00",
		  "timeStamp": "2021-08-17T14:32:39+00:00",
		  "publishToEcom": "true",
		  "categoryID": "33",
		  "taxClassID": "1",
		  "departmentID": "0",
		  "itemMatrixID": "889",
		  "manufacturerID": "56",
		  "seasonID": "0",
		  "defaultVendorID": "421",
		  "Prices": {
			"ItemPrice": [
			  {
				"amount": "45",
				"useTypeID": "1",
				"useType": "Default"
			  },
			  {
				"amount": "49.5",
				"useTypeID": "2",
				"useType": "MSRP"
			  },
			  {
				"amount": "40",
				"useTypeID": "3",
				"useType": "Online"
			  },
			  {
				"amount": "0",
				"useTypeID": "5",
				"useType": "UK"
			  }
			]
		  }
		},
		{
		  "itemID": "1088",
		  "systemSku": "210000001112",
		  "defaultCost": "18",
		  "avgCost": "18",
		  "discountable": "true",
		  "tax": "true",
		  "archived": "false",
		  "itemType": "default",
		  "serialized": "false",
		  "description": "Adelio 3mm deluxe bootss 11",
		  "modelYear": "0",
		  "upc": "",
		  "ean": "",
		  "customSku": "CSKU0003",
		  "manufacturerSku": "MSKU0004",
		  "createTime": "2019-05-08T04:41:40+00:00",
		  "timeStamp": "2021-08-17T14:32:39+00:00",
		  "publishToEcom": "true",
		  "categoryID": "33",
		  "taxClassID": "1",
		  "departmentID": "0",
		  "itemMatrixID": "889",
		  "manufacturerID": "56",
		  "seasonID": "0",
		  "defaultVendorID": "421",
		  "Prices": {
			"ItemPrice": [
			  {
				"amount": "45",
				"useTypeID": "1",
				"useType": "Default"
			  },
			  {
				"amount": "49.5",
				"useTypeID": "2",
				"useType": "MSRP"
			  },
			  {
				"amount": "40",
				"useTypeID": "3",
				"useType": "Online"
			  },
			  {
				"amount": "0",
				"useTypeID": "5",
				"useType": "UK"
			  }
			]
		  }
		},
		{
		  "itemID": "1089",
		  "systemSku": "210000001113",
		  "defaultCost": "18",
		  "avgCost": "18",
		  "discountable": "true",
		  "tax": "true",
		  "archived": "false",
		  "itemType": "default",
		  "serialized": "false",
		  "description": "Adelio 3mm deluxe boots 7",
		  "modelYear": "0",
		  "upc": "",
		  "ean": "",
		  "customSku": "CSKU0004",
		  "manufacturerSku": "MSKU0004",
		  "createTime": "2019-05-08T04:41:40+00:00",
		  "timeStamp": "2021-08-17T14:32:39+00:00",
		  "publishToEcom": "true",
		  "categoryID": "33",
		  "taxClassID": "1",
		  "departmentID": "0",
		  "itemMatrixID": "0",
		  "manufacturerID": "56",
		  "seasonID": "0",
		  "defaultVendorID": "421",
		  "Prices": {
			"ItemPrice": [
			  {
				"amount": "45",
				"useTypeID": "1",
				"useType": "Default"
			  },
			  {
				"amount": "49.5",
				"useTypeID": "2",
				"useType": "MSRP"
			  },
			  {
				"amount": "49.5",
				"useTypeID": "3",
				"useType": "Online"
			  },
			  {
				"amount": "0",
				"useTypeID": "5",
				"useType": "UK"
			  }
			]
		  }
		},
		{
		  "itemID": "1090",
		  "systemSku": "210000001114",
		  "defaultCost": "18",
		  "avgCost": "18",
		  "discountable": "true",
		  "tax": "true",
		  "archived": "false",
		  "itemType": "default",
		  "serialized": "false",
		  "description": "Adelio 3mm deluxe bootss 80",
		  "modelYear": "0",
		  "upc": "",
		  "ean": "352216875285",
		  "customSku": "CSKU0005",
		  "manufacturerSku": "MSKU0004",
		  "createTime": "2019-05-08T04:41:40+00:00",
		  "timeStamp": "2021-08-17T14:32:39+00:00",
		  "publishToEcom": "true",
		  "categoryID": "33",
		  "taxClassID": "1",
		  "departmentID": "0",
		  "itemMatrixID": "889",
		  "manufacturerID": "56",
		  "seasonID": "0",
		  "defaultVendorID": "421",
		  "Prices": {
			"ItemPrice": [
			  {
				"amount": "45",
				"useTypeID": "1",
				"useType": "Default"
			  },
			  {
				"amount": "49.5",
				"useTypeID": "2",
				"useType": "MSRP"
			  },
			  {
				"amount": "40",
				"useTypeID": "3",
				"useType": "Online"
			  },
			  {
				"amount": "0",
				"useTypeID": "5",
				"useType": "UK"
			  }
			]
		  }
		},
		{
		  "itemID": "1091",
		  "systemSku": "210000001115",
		  "defaultCost": "18",
		  "avgCost": "18.909090909",
		  "discountable": "true",
		  "tax": "true",
		  "archived": "false",
		  "itemType": "default",
		  "serialized": "false",
		  "description": "Adelio 3mm deluxe bootss 9",
		  "modelYear": "0",
		  "upc": "",
		  "ean": "123456789123",
		  "customSku": "CSKU0006",
		  "manufacturerSku": "MSKU0004",
		  "createTime": "2019-05-08T04:41:40+00:00",
		  "timeStamp": "2021-08-17T14:32:39+00:00",
		  "publishToEcom": "true",
		  "categoryID": "33",
		  "taxClassID": "1",
		  "departmentID": "0",
		  "itemMatrixID": "889",
		  "manufacturerID": "56",
		  "seasonID": "0",
		  "defaultVendorID": "421",
		  "Prices": {
			"ItemPrice": [
			  {
				"amount": "45",
				"useTypeID": "1",
				"useType": "Default"
			  },
			  {
				"amount": "50",
				"useTypeID": "2",
				"useType": "MSRP"
			  },
			  {
				"amount": "45",
				"useTypeID": "3",
				"useType": "Online"
			  },
			  {
				"amount": "0",
				"useTypeID": "5",
				"useType": "UK"
			  }
			]
		  }
		},
		{
		  "itemID": "1092",
		  "systemSku": "210000001116",
		  "defaultCost": "20",
		  "avgCost": "20",
		  "discountable": "true",
		  "tax": "true",
		  "archived": "false",
		  "itemType": "default",
		  "serialized": "false",
		  "description": "Adelio cap L",
		  "modelYear": "0",
		  "upc": "",
		  "ean": "",
		  "customSku": "CSKU0007",
		  "manufacturerSku": "MSKU0007",
		  "createTime": "2019-05-08T04:41:40+00:00",
		  "timeStamp": "2021-08-17T14:32:39+00:00",
		  "publishToEcom": "true",
		  "categoryID": "33",
		  "taxClassID": "1",
		  "departmentID": "0",
		  "itemMatrixID": "890",
		  "manufacturerID": "56",
		  "seasonID": "0",
		  "defaultVendorID": "421",
		  "Prices": {
			"ItemPrice": [
			  {
				"amount": "39.95",
				"useTypeID": "1",
				"useType": "Default"
			  },
			  {
				"amount": "43.95",
				"useTypeID": "2",
				"useType": "MSRP"
			  },
			  {
				"amount": "39.95",
				"useTypeID": "3",
				"useType": "Online"
			  },
			  {
				"amount": "0",
				"useTypeID": "5",
				"useType": "UK"
			  }
			]
		  }
		},
		{
		  "itemID": "1093",
		  "systemSku": "210000001117",
		  "defaultCost": "20",
		  "avgCost": "20",
		  "discountable": "true",
		  "tax": "true",
		  "archived": "false",
		  "itemType": "default",
		  "serialized": "false",
		  "description": "Adelio cap M",
		  "modelYear": "0",
		  "upc": "",
		  "ean": "",
		  "customSku": "",
		  "manufacturerSku": "",
		  "createTime": "2019-05-08T04:41:40+00:00",
		  "timeStamp": "2021-08-17T14:32:39+00:00",
		  "publishToEcom": "false",
		  "categoryID": "33",
		  "taxClassID": "1",
		  "departmentID": "0",
		  "itemMatrixID": "890",
		  "manufacturerID": "56",
		  "seasonID": "0",
		  "defaultVendorID": "421",
		  "Prices": {
			"ItemPrice": [
			  {
				"amount": "39.95",
				"useTypeID": "1",
				"useType": "Default"
			  },
			  {
				"amount": "0",
				"useTypeID": "2",
				"useType": "MSRP"
			  },
			  {
				"amount": "39.95",
				"useTypeID": "3",
				"useType": "Online"
			  },
			  {
				"amount": "0",
				"useTypeID": "5",
				"useType": "UK"
			  }
			]
		  }
		},
		{
		  "itemID": "1094",
		  "systemSku": "210000001118",
		  "defaultCost": "20",
		  "avgCost": "20",
		  "discountable": "true",
		  "tax": "true",
		  "archived": "false",
		  "itemType": "default",
		  "serialized": "false",
		  "description": "Adelio cap S",
		  "modelYear": "0",
		  "upc": "",
		  "ean": "",
		  "customSku": "CSKU0008",
		  "manufacturerSku": "MSKU0008",
		  "createTime": "2019-05-08T04:41:40+00:00",
		  "timeStamp": "2021-08-17T15:42:21+00:00",
		  "publishToEcom": "false",
		  "categoryID": "33",
		  "taxClassID": "1",
		  "departmentID": "0",
		  "itemMatrixID": "890",
		  "manufacturerID": "56",
		  "seasonID": "0",
		  "defaultVendorID": "421",
		  "Prices": {
			"ItemPrice": [
			  {
				"amount": "39.95",
				"useTypeID": "1",
				"useType": "Default"
			  },
			  {
				"amount": "43.95",
				"useTypeID": "2",
				"useType": "MSRP"
			  },
			  {
				"amount": "39.95",
				"useTypeID": "3",
				"useType": "Online"
			  },
			  {
				"amount": "0",
				"useTypeID": "5",
				"useType": "UK"
			  }
			]
		  }
		}
	];
	window.params = {};
	location.search.substring(1).split("&").forEach((item,i) => {
		params[item.split('=')[0]] = item.split('=')[1];
	});
	/**/console.log(params);
	$('#loyalty').append('<div class="">\
					   accountID = '+params.accountID+'<br>\
					   customerID = '+params.customerID+'<br>\
					   employeeID = '+params.employeeID+'<br>\
					   registerID = '+params.registerID+'<br>\
					   returnURL = '+decodeURIComponent(params.returnURL)+'<br>\
					   saleID = '+params.saleID+'<br>\
					   shopID = '+params.shopID+'<br>\
					   systemUserID = '+params.systemUserID+'<br>\
					   type = '+params.type+'<br>\
					   </div>\
					   <a href="'+decodeURIComponent(params.returnURL)+'" title="returnURL">Return to POS</a><br>\
	');
	products.forEach(product=>{
		$('#loyalty').append(`<button onclick="params['itemID'] = ${product.itemID}; /**/console.log(params);postDataToWebhook(params)">Add ${product.description} to sale</button>`)
	});
})
//JS post to webhook
function postDataToWebhook(params){
	//url to your webhook
	var webHookUrl="https://hook.integromat.com/1sl68q8vs5senhipj9tuibca0hr8scms";//+location.search;
  
  	//https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest
	var oReq = new XMLHttpRequest();
	var myJSONStr = params;
  
	//register method called after data has been sent method is executed
	oReq.addEventListener("load", reqListener);
	oReq.open("POST", webHookUrl, true);
	//oReq.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
	oReq.send(params);
}
//callback method after webhook is executed
function reqListener () {
	/**/console.log(this);
  	console.log(this.responseText);
}